% in is a row vector
function out = construct_benchmark_function(in,flag)
 
if (~exist('flag','var'))
   error("Invalid flag!");
end

[x, dim] = size(in);
z = zeros(1,dim);
switch (flag)
    case 1
        out = 0;
        o = [1.9005,-1.5644,-0.9788,-2.2536,2.499,-3.2853,0.9759,-3.6661,0.0985,-3.2465,3.806];
        for d = 1:dim
            z(1,dim) = in(1,d)-o(1,d);
        end
        for d = 1:dim
            out = out + z(1,d)^2-10*cos(2*pi*z(1,d))+10; 
        end
    case 2
        out = 0;
        o = [1.9005,-1.5644,-0.9788,-2.2536,2.499,-3.2853,0.9759,-3.6661,0.0985,-3.2465,3.806];
        for d = 1:dim
            z(1,dim) = in(1,d)-o(1,d);
        end
        for d = 1:dim
            out = out + z(1,d)^2-10*cos(2*pi*z(1,d))+10; 
        end    
    case 3
        o = [-0.1367,0.1186,-0.0968,0.0237,-0.2933,-0.0478,0.3518,0.3579,-0.0586,-0.0375,0.253];
        for d = 1:dim
            z(1,dim) = in(1,d)-o(1,d);
        end
        x1 = 0;
        x2 = 0;
        for k = 1:21
            for d = 1:dim
                x1 = x1 + (0.5^(k-1))*cos(2*pi*(3^(k-1))*(z(1,d)+0.5));
            end
            x2 = x2 + (0.5^(k-1))*cos(2*pi*(3^(k-1))*0.5);
        end
        out = x1 - dim*x2;
    case 4
        o = [-0.1367,0.1186,-0.0968,0.0237,-0.2933,-0.0478,0.3518,0.3579,-0.0586,-0.0375,0.253];
        for d = 1:dim
            z(1,dim) = in(1,d)-o(1,d);
        end
        x1 = 0;
        x2 = 0;
        for k = 1:21
            for d = 1:dim
                x1 = x1 + (0.5^(k-1))*cos(2*pi*(3^(k-1))*(z(1,d)+0.5));
            end
            x2 = x2 + (0.5^(k-1))*cos(2*pi*(3^(k-1))*0.5);
        end
        out = x1 - dim*x2;
    case 5
        o = [-276.2684,-11.911,-578.7884,-287.6486,-84.3858,-228.6753,-458.1516,-202.2145,-105.8642,-96.4898,-395.7468];
        for d = 1:dim
            z(1,dim) = in(1,d)-o(1,d);
        end
        x1 = 0;
        x2 = 1;
        for d = 1:dim
           x1 = x1 + (z(1,d)^2)/4000;
           x2 = x2 * cos((in(1,d)^2)/sqrt(d));
        end
        
        out = x1 - x2 + 1;
    case 6
        o = [-276.2684,-11.911,-578.7884,-287.6486,-84.3858,-228.6753,-458.1516,-202.2145,-105.8642,-96.4898,-395.7468];
        for d = 1:dim
            z(1,dim) = in(1,d)-o(1,d);
        end
        x1 = 0;
        x2 = 1;
        for d = 1:dim
           x1 = x1 + (z(1,d)^2)/4000;
           x2 = x2 * cos((in(1,d)^2)/sqrt(d));
        end
        
        out = x1 - x2 + 1;
    case 7
        o = [-16.823,14.9769,6.169,9.5566,19.5417,-17.19,-18.8248,0.8511,-15.1162,10.7934,7.4091];
        for d = 1:dim
            z(1,dim) = in(1,d)-o(1,d);
        end
        x1 = 0;
        x2 = 0;
        for d = 1:dim
            x1 = x1 + (z(1,d)^2);
            x2 = x2 + 2*cos(2*pi*z(1,d));
        end
        
        out = -20*exp(-0.2*sqrt(x1/dim))-exp(x2/dim) + 20 + exp(1);
    case 8
        o = [-16.823,14.9769,6.169,9.5566,19.5417,-17.19,-18.8248,0.8511,-15.1162,10.7934,7.4091];
        for d = 1:dim
            z(1,dim) = in(1,d)-o(1,d);
        end
        x1 = 0;
        x2 = 0;
        for d = 1:dim
            x1 = x1 + (z(1,d)^2);
            x2 = x2 + 2*cos(2*pi*z(1,d));
        end
        
        out = -20*exp(-0.2*sqrt(x1/dim))-exp(x2/dim) + 20 + exp(1);
    case 9
        out = 0;
        o = [-39.3119,58.8999,-46.3224,-74.6515,-16.7997,-80.5441,-80.5441,-10.5935,24.9694,89.8384,9.1119,-10.7443];
        for d = 1:dim
            z(1,dim) = in(1,d)-o(1,d);
        end
        for d = 1:dim
            out = out + (z(1,d)^2);
        end
    case 10
        out = 0;
        o = [-39.3119,58.8999,-46.3224,-74.6515,-16.7997,-80.5441,-80.5441,-10.5935,24.9694,89.8384,9.1119,-10.7443];
        for d = 1:dim
            z(1,dim) = in(1,d)-o(1,d);
        end
        for d = 1:dim
            out = out + (z(1,d)^2);
        end
end